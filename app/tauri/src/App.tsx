import { useEffect, useState } from "react";
import { invoke } from "@tauri-apps/api";
import { listen, UnlistenFn } from "@tauri-apps/api/event";

import type { ViewModel } from '../../shared_types/generated/typescript/types/shared_types.d.ts'

const initialState: ViewModel = {
  text: "",
  confirmed: false,
  serialize: () => { }
};

function App() {
  const [view, setView] = useState(initialState);

  useEffect(
    () => {
      invoke("watch");
    },
    /*once*/[]
  );

  useEffect(() => {
    let unlistenToRender: UnlistenFn;

    listen<ViewModel>("render", (event) => {
      setView(event.payload);
    }).then((unlisten) => {
      unlistenToRender = unlisten;
    });

    return () => {
      unlistenToRender?.();
    };
  });

  return (
    <main>
      <section className="container has-text-centered">
        <img width="250" src="data:image/png;base64,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" alt="" />
      </section>
    </main >
  );
}

export default App;
